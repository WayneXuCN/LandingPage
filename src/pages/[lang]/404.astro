---
/**
 * /[lang]/404.astro
 * 多语言404页面
 *
 * 支持多语言的404错误页面，根据URL中的语言参数显示对应语言的错误信息。
 * 为每种支持的语言提供本地化的错误提示和导航选项。
 *
 * @page
 */
import BaseLayout from '@layouts/BaseLayout.astro';
import { getI18n, locales, type Locale } from '@lib/i18n';

/**
 * 生成静态路径
 * 为每个支持的语言生成静态路径
 */
export function getStaticPaths() {
  return locales.map(lang => ({
    params: { lang },
  }));
}

// 获取当前语言参数
const { lang } = Astro.params as { lang: Locale };

// 从内容集合获取翻译数据
const translations = await getI18n(lang);
const { site } = translations;

/**
 * 多语言页面内容配置
 */
const content = {
  /** 中文内容 */
  zh_CN: {
    /** 页面标题 */
    title: '页面未找到',
    /** 页面描述 */
    description: '抱歉，您访问的页面不存在。',
    /** 返回首页按钮文本 */
    backHome: '返回首页',
  },
  /** 英文内容 */
  en_US: {
    /** 页面标题 */
    title: 'Page Not Found',
    /** 页面描述 */
    description: 'Sorry, the page you are looking for does not exist.',
    /** 返回首页按钮文本 */
    backHome: 'Back to Home',
  },
};

// 获取当前语言的内容，默认使用英文
const pageContent = content[lang] || content.en_US;
---

<BaseLayout title={`404 | ${site.title}`} description={pageContent.description} lang={lang}>
  {/* 404页面内容容器 */}
  <div class='min-h-[60vh] flex flex-col items-center justify-center text-center'>
    {/* 404错误代码 */}
    <h1 class='text-9xl font-bold text-gray-200 dark:text-gray-700 mb-4'>404</h1>

    {/* 页面标题 */}
    <h2 class='text-3xl font-semibold mb-4 text-gray-900 dark:text-white'>
      {pageContent.title}
    </h2>

    {/* 页面描述 */}
    <p class='text-gray-600 dark:text-gray-400 mb-8 max-w-md'>
      {pageContent.description}
    </p>

    {/* 返回首页链接 */}
    <a
      href={`/${lang}/`}
      class='inline-flex items-center px-6 py-3 bg-black dark:bg-white text-white dark:text-black rounded-full font-medium hover:bg-gray-800 dark:hover:bg-gray-200 transition-colors'
    >
      {/* 返回箭头图标 */}
      <svg
        class='mr-2 w-4 h-4'
        viewBox='0 0 24 24'
        fill='none'
        stroke='currentColor'
        stroke-width='2'
        stroke-linecap='round'
        stroke-linejoin='round'
        aria-hidden='true'
      >
        <path d='M19 12H5'></path>
        <path d='M12 19l-7-7 7-7'></path>
      </svg>
      {pageContent.backHome}
    </a>
  </div>
</BaseLayout>
